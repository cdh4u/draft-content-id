<?xml version="1.0" encoding="windows-1252"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY RFC0822 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC0822 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5322.xml">
<!ENTITY RFC2045 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2045.xml">
<!ENTITY RFC2392 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2392.xml">
<!ENTITY RFC3261 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3261.xml">
<!ENTITY RFC5368 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5368.xml">
<!ENTITY RFC5621 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5621.xml">
<!ENTITY RFC6442 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6442.xml">
]>
<?rfc toc="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="yes" ?>
<?rfc sortrefs="no" ?>
<?rfc strict="yes" ?>
<rfc ipr="trust200902" category="std" docName="draft-ietf-sipcore-content-id-03" obsoletes="" updates="5621" submissionType="IETF" xml:lang="en">
  <front>
    <title abbrev="Content-ID in SIP">
      Content-ID header field in Session Initiation Protocol (SIP)
    </title>
      <author initials="C.H." surname="Holmberg" fullname="Christer Holmberg">
      <organization>Ericsson</organization>
      <address>
        <postal>
          <street>Hirsalantie 11</street>
          <code>02420</code>
          <city>Jorvas</city>
          <country>Finland</country>
        </postal>
        <email>christer.holmberg@ericsson.com</email>
      </address>
    </author>
    <author initials="I.S." surname="Sedlacek" fullname="Ivo Sedlacek">
      <organization>Ericsson</organization>
      <address>
        <postal>
          <street>Sokolovska 79</street>
          <code>18600</code>
          <city>Praha</city>
          <country>Czech Republic</country>
        </postal>
        <email>ivo.sedlacek@ericsson.com</email>
      </address>
    </author>

    <date year="2017"/>
    <area>Transport</area>
    <workgroup>SIPCORE Working Group</workgroup>
    <keyword>SIP</keyword>
    <abstract>
      <t>
        This document specifies the Content-ID header field for usage in the Session Initiation Protocol (SIP).
        The document also updates RFC 5621, to enable a Content-ID URL to reference a complete message-body and
        metadata provided by some additional SIP header fields.
      </t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction" toc="default">
      <section title="Identifying a body part" toc="default">
        <t>
          A SIP message consists of a start-line, one or more header fields, an
          empty line indicating the end of the header fields, and
          an optional message-body, as specified in <xref target="RFC3261" pageno="false" format="default"/>.
        </t><t>
          The message-body can be a non-multipart message-body or a multipart message-body as
          specified in <xref target="RFC3261" pageno="false" format="default"/>.
        </t><t>
          <xref target="RFC5621" pageno="false" format="default"/> defines generic handling
          of a multipart message-body in a SIP message.
        </t><t>
          A multipart message-body contains zero, one or several body parts, encoded using
          <xref target="RFC2045" pageno="false" format="default"/> format.
        </t><t>
          A body part in the multipart message-body is described using header fields such as
          Content-Disposition, Content-Encoding, and Content-Type, which provide information
          on the content of the body part, as specified in <xref target="RFC5621" pageno="false" format="default"/>.
          A body part in the multipart message-body can also contain a Content-ID header
          field with an ID value uniquely identifying the body part, as specified in
          <xref target="RFC2045" pageno="false" format="default"/>.
        </t>
      </section>
      <section title="Referencing a body part" toc="default">
        <t>
          A SIP header field can reference a body part using a Content-ID URL, as specified
          in <xref target="RFC5621" pageno="false" format="default"/>.
        </t><t>
          The Content-ID URL is specified in <xref target="RFC2392" pageno="false" format="default"/>.
          <xref target="RFC2392" pageno="false" format="default"/> specifies how to identify the body
          part referenced by a Content-ID URL. The Content-ID URL value is included in the Content-ID
          header field of the body part.
        </t><t>
          Examples of SIP header fields referencing a body part using a Content-ID URL are:
          <list style="symbols">
            <t>
              <xref target="RFC6442" pageno="false" format="default"/> specifies how a Geolocation header
              field references a body part using a Content-ID URL, for providing location.
            </t><t>
              <xref target="RFC5368" pageno="false" format="default"/> specifies how a Refer-To header field
              references a body part using a Content-ID URL, to provide a list of targets.
            </t>
          </list>
      </t>
      </section>
      <section title="Problem statement" toc="default">
        <t>
          It is currently not specified how to uniquely identify a complete message-body of
          a SIP message using a Content-ID header field, and how to reference a complete message-body
          using a Content-ID URL.
        </t>
      </section>
      <section title="Consequences" toc="default">
        <t>
        The examples below shows the consequences of the problem described above.
        </t>
        <section title="Example 1" toc="default">
          <t>
            If a UAC sends an INVITE request conveying location as specified in
            <xref target="RFC6442" pageno="false" format="default"/>,
            if the UAC decides not to include an SDP offer, and if the location
            is conveyed by value, then the UAC needs to include only one MIME entity
            in the INVITE request. This content can be e.g. of the application/pidf+xml MIME type.
          </t><t>
            However, due to <xref target="RFC6442" pageno="false" format="default"/> requiring inclusion
            of a Geolocation header field referencing the body part with the location information,
            the UAC includes a multipart message-body with single body part in the INVITE request, and
            includes the location information of application/pidf+xml MIME type and an associated
            Content-ID header field in the body part.
          </t>
        </section>
        <section title="Example 2" toc="default">
          <t>
            If a UAC sends an REFER request including a list of targets as specified in
            <xref target="RFC5368" pageno="false" format="default"/>, then the UAC needs to
            include only one MIME entity part in the REFER request. This content is of the
            application/resource-lists+xml MIME type.
          </t><t>
            However, due to <xref target="RFC5368" pageno="false" format="default"/> requiring
            inclusion of a Refer-To header field referencing the body part containing the list of targets,
            the UAC includes a multipart message-body with single body part in the REFER request,
            and includes the list of targets of application/resource-lists+xml MIME type and an
            associated Content-ID header field in the body part.
          </t>
        </section>
      </section>
      <section title="Solution" toc="default">
        <t>
          In order to solve the problems described above, this document:
          <list style="symbols">
              <t>Specifies and registers the Content-ID header field as a SIP header field; and
              </t>
              <t>Specifies that, when used as a SIP header field, the Content-ID header field
              identifies the complete message-body, and metadata provided by some additional
              SIP header fields, of the SIP message; and
              </t>
              <t>Updates <xref target="RFC5621" pageno="false" format="default"/>, to enable a
              Content-ID URL to reference a complete message-body and metadata provided by some
              additional SIP header fields.
              </t>
          </list>
        </t>
        <t>NOTE: In <xref target="RFC5621" pageno="false" format="default"/>, the Content-ID URL
        references a specific body part only.
        </t>
      </section>
    </section>

    <section title="Conventions">
    <t>
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref target="RFC2119"></xref>.
    </t>
    </section>

    <section anchor="Content-ID" title="Content-ID header field">
      <section anchor="Content-ID-Introduction" title="Introduction">
        <t>
          This section defines the usage of the Content-ID header field for SIP.
        </t>
      </section>

      <section anchor="Content-ID-Syntax" title="Syntax">
        <t>
          The ABNF <xref target="RFC5234"></xref> for the Content-ID header field is:
        </t>
        <figure>
          <artwork><![CDATA[

   Content-ID = "Content-ID" HCOLON msg-id

   msg-id     = "<" id-left "@" id-right ">"

   NOTE: id-left and id-right are specified in [RFC5322]. HCOLON is
   defined in [RFC3261].

   NOTE: When used in a SIP header field, the msg-id syntax has been
   simplified compared to the syntax in [RFC5322].

       ]]></artwork>
        </figure>
      </section>

      <section anchor="Content-ID-Semantic" title="Semantics">
        <t>The Content-ID header field included in the header fields of a SIP message
        identifies the message-body of the SIP message, and
        the metadata provided by:
          <list style="symbols">
            <t>
              a MIME-Version header field, if included in the header fields of
              the SIP message; and
            </t><t>
              any 'Content-' prefixed header fields (including the Content-ID
              header field itself) included in the header fields of the
              SIP message.
            </t>
          </list>
        </t>
        <t>
          The Content-ID header field can be included in any SIP message which
          is allowed to contain a message-body.
        </t>
      </section>
      <section anchor="Content-ID-Procedures" title="Procedures">
        <section anchor="Content-ID-UA-Procedures" title="UA procedures">
          <t>
            A UA MAY include a Content-ID header field in any SIP message that is allowed
            to contain a message-body.
          </t><t>
            A UA MUST NOT include a Content-ID header field in any SIP message that is
            not allowed to contain a message-body.
          </t><t>
            The UA MUST set the value of the Content-ID header field to a globally unique
            value.
          </t>
        </section>
        <section anchor="Content-ID-proxy-Procedures" title="Proxy procedures">
          <t>
            A proxy MUST NOT add a Content-ID header field in a SIP message.
          </t><t>
            A proxy MUST NOT modify a Content-ID header field included in a SIP message.
          </t><t>
            A proxy MUST NOT delete a Content-ID header field from a SIP message.
          </t>
        </section>
      </section>
    </section>

    <section anchor="section.rfcupdate" title="Update to RFC 5621">
        <t>This section updates section 9.1 of <xref target="RFC5621" pageno="false"
        format="default"/>, by allowing a Content-ID URL to reference a message-body
        and the related metadata (<xref target="Content-ID-Semantic" pageno="false"
        format="default"/>), in addition to allowing a reference to a body part.
        </t>
        <figure>
          <artwork><![CDATA[

OLD TEXT:

   Content-ID URLs allow creating references to body parts.  A given
   Content-ID URL [RFC2392], which can appear in a header field or
   within a body part (e.g., in an SDP attribute), points to a
   particular body part.


NEW TEXT:

   Content-ID URLs allow creating references to body parts or
   message-bodies (and the header fields describing the
   message-bodies). A given Content-ID URL [RFC2392], which can appear
   in a header field or within a body part (e.g., in an SDP attribute),
   points to a particular body part or the message-body (and the
   header fields describing the message-body).

       ]]></artwork>
        </figure>

    </section>
    <section anchor="section.sec" title="Security considerations">
      <t>
        The Content-ID header field value MUST NOT reveal sensitive user information.
      </t><t>
        If the message-body associated with the Content-ID header field is an
        encrypted body, it MUST NOT be possible to derive a key that can be used
        to decrypt the body from the Content-ID header field value.
      </t>
    </section>
    <section anchor="section.iana" title="IANA considerations">
      <t>
        This specification registers a new SIP header field according to the procedures
        in <xref target="RFC3261" pageno="false" format="default"/>.
      </t>
      <section anchor="section.iana.header" title="Header field">
        <t>
          The header field described in <xref target="Content-ID"/> has been registered
          in the "Header Fields" sub-registry of the "Session Initiation Protocol (SIP)
          Parameters" registry by adding a row with these values:
        </t>
        <t>[RFC EDITOR NOTE: Please replace XXXX with the RFC number of this document when publishing]</t>
        <figure>
          <artwork><![CDATA[
   Header Name:  Content-ID

   compact:

   Reference:  RFCXXXX
       ]]></artwork>
        </figure>
      </section>
    </section>
    <section title="Change log">
      <t>
        [RFC EDITOR NOTE: Please remove this section when publishing]
      </t>
      <t>
        Changes from draft-ietf-sipcore-content-id-03
        <list style="symbols">
          <t>
             Changes based on doc shepard review:
          </t>
          <t>
              - Reference to RFC 5234 added.
          </t>
          <t>
              - Editorial changes.
          </t>
        </list>
      </t>
      <t>
        Changes from draft-ietf-sipcore-content-id-02
        <list style="symbols">
          <t>
             Editorial changes based on comments from Paul Kyzivat.
          </t>
        </list>
      </t>
      <t>
        Changes from draft-ietf-sipcore-content-id-01
        <list style="symbols">
          <t>
             Update to RFC 5621 added.
          </t>
          <t>
             Editorial changes.
         </t>
        </list>
      </t>
    </section>
  </middle>
  <back>
    <references title="Normative references">
      <?rfc include="reference.RFC.2045"?>
      <?rfc include="reference.RFC.2119"?>
      <?rfc include="reference.RFC.2392"?>
      <?rfc include="reference.RFC.5234"?>
      <?rfc include="reference.RFC.5322"?>
      <?rfc include="reference.RFC.3261"?>
      <?rfc include="reference.RFC.5368"?>
      <?rfc include="reference.RFC.5621"?>
      <?rfc include="reference.RFC.6442"?>
    </references>
  </back>
</rfc>
